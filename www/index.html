<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Condomínio</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Inter+Tight:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="./styles/index.css">
</head>
<body>
    <div class="app-bar">
        <a href="./index.html"><img src="https://storage.googleapis.com/flutterflow-io-6f20.appspot.com/projects/erdn-7awoaw/assets/60rvipp2d6di/image-removebg-preview.png" alt="Logo" class="logo"></a>

        <div class="navbar-container">
            <button class="navbar-toggle" id="navbar-toggle">
                <i class="material-icons">menu</i>
            </button>
                <a href="#" class="navbar-item">
                    <i class="material-icons">notifications</i>
                    <span>Notificações</span>
                    <span class="notification-badge">3</span>
                </a>
                <a href="../www/pages/configuracoes.html" class="navbar-item">
                    <i class="material-icons">settings</i>
                    <span>Configurações</span>
                </a>
            </div>
        </div>
    </div>
    <img src="" alt="Condomínio" class="condo-image" id="condo-image-display"> <h1 class="condo-name" id="condo-name-display"></h1>
    <div class="info-card">
        <h2 class="info-title">Informações</h2>
        <div class="info-row">
            <span class="material-icons info-icon">location_on</span>
            <span id="info-card-location"></span>
        </div>
        <div class="info-row">
            <span class="material-icons info-icon">business</span> <span id="info-card-cnpj"></span>
        </div>
        <div class="info-row">
            <span class="material-icons info-icon">phone</span>
            <span id="info-card-phone"></span>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button class="button button-primary" id="show-more-btn">Exibir mais</button>
        </div>
    </div>
    <div class="tickets-card">
        <h3 class="tickets-title">Chamados</h3>
        <h4 class="contacts-list-title">Fornecedores</h4>
        <div class="contacts-list" id="contacts-list">
            <div class="status-message status-info">Carregando lista...</div>
        </div>
        <div class="tickets-buttons">
            <button class="button button-primary" id="create-ticket-btn">Criar novo chamado</button>
            <button class="button button-orange" id="view-contacts-btn">Gerenciar fornecedores</button>
            <a href="../www/pages/chamados.html" class="button button-primary">
                Visualizar chamados
              </a>
        </div>
    </div>
    <div class="menu-card">
        <a href="./pages/documentos.html" class="menu-item">
            <div class="menu-item-icon"></div>
            <span class="menu-item-text">Documentos</span>
        </a>
        <a href="./pages/manutencao.html" class="menu-item">
            <div class="menu-item-icon"></div>
            <span class="menu-item-text">Manutenção</span>
        </a>
        <a href="./pages/checklist.html" class="menu-item">
            <div class="menu-item-icon"></div>
            <span class="menu-item-text">Check-list</span>
        </a>
        <a href="./pages/solicitacao-moradores.html" class="menu-item">
            <div class="menu-item-icon"></div>
            <span class="menu-item-text">Parceiros KeepNow</span>
        </a>
    </div>
    <div id="info-modal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title">Informações Gerais</div>
                <button class="modal-edit-btn" id="edit-info-btn"><span class="material-icons">edit</span></button>
                <button class="modal-close-x">&times;</button>
            </div>
            <div class="modal-row">
                <span class="material-icons info-icon">badge</span>
                 <span class="info-display" id="modal-name-display"></span>
                <input type="text" placeholder="Nome do Condomínio" class="form-control info-edit hidden" id="edit-modal-name">
            </div>
             <div class="modal-row">
                 <span class="material-icons info-icon">location_on</span>
                 <span class="info-display" id="modal-location"></span>
                 <input type="text" placeholder="Endereço Completo" class="form-control info-edit hidden" id="edit-modal-location">
             </div>
             <div class="modal-row">
                 <span class="material-icons info-icon">map</span>
                 <span class="info-display" id="modal-cep"></span>
                 <input type="text" placeholder="CEP" maxlength="9" class="form-control info-edit hidden" id="edit-modal-cep"> </div>
             <div class="modal-row">
                <span class="material-icons info-icon">location_city</span>
                <span class="info-display" id="modal-city"></span>
                <input type="text" placeholder="Cidade" class="form-control info-edit hidden" id="edit-modal-city">
            </div>
             <div class="modal-row">
                 <span class="material-icons info-icon">phone</span>
                 <span class="info-display" id="modal-phone"></span>
                  <input type="tel" placeholder="Telefone Condomínio" maxlength="19" class="form-control info-edit hidden" id="edit-modal-phone">
             </div>
              <div class="modal-row">
                <span class="material-icons info-icon">support_agent</span>
                <span class="info-display" id="modal-manager-phone"></span>
                 <input type="tel" placeholder="Telefone Síndico" maxlength="19" class="form-control info-edit hidden" id="edit-modal-manager-phone">
            </div>
             <div class="modal-row">
                 <span class="material-icons info-icon">business</span>
                 <span class="info-display" id="modal-cnpj"></span>
                 <input type="text" placeholder="CNPJ" maxlength="18" class="form-control info-edit hidden" id="edit-modal-cnpj"> </div>

             <div class="modal-row">
                <span class="material-icons info-icon">image</span>
                 <img id="modal-image-preview" src="" alt="Prévia" class="info-display" style="max-width: 100px; max-height: 80px; margin-left: 0; border: 1px solid #eee;">
                <span class="info-display hidden" id="modal-photo-url-display" style="word-break: break-all;"></span>
                <label for="edit-modal-photo-file" class="info-edit-label info-edit hidden">Alterar Imagem Principal:</label>
                <input type="file" class="form-control info-edit hidden" id="edit-modal-photo-file" accept="image/*">
            </div>
            <div class="modal-section-title">Adicionais</div>
             <div class="modal-row">
                 <span class="material-icons info-icon">people_outline</span>
                 <span class="info-display" id="modal-residents"></span>
                 <input type="number" placeholder="Nº Moradores" class="form-control info-edit hidden" id="edit-modal-residents" min="0">
             </div>
             <div class="modal-row">
                 <span class="material-icons info-icon">apartment</span>
                 <span class="info-display" id="modal-units"></span>
                 <input type="number" placeholder="Nº Unidades" class="form-control info-edit hidden" id="edit-modal-units" min="0">
             </div>
             <div class="modal-row">
                 <span class="material-icons info-icon">domain</span>
                 <span class="info-display" id="modal-blocks"></span>
                 <input type="number" placeholder="Nº Torres/Blocos" class="form-control info-edit hidden" id="edit-modal-blocks" min="0">
             </div>
             <div class="modal-row">
                 <span class="material-icons info-icon">admin_panel_settings</span>
                 <span class="info-display" id="modal-admin"></span>
                 <input type="text" placeholder="Nome da Administradora" class="form-control info-edit hidden" id="edit-modal-admin">
             </div>
            <div class="modal-actions info-edit hidden">
                 <button type="button" class="btn btn-secondary" id="cancel-edit-info-btn">Cancelar</button>
                 <button type="button" class="btn btn-primary" id="save-edit-info-btn">Salvar</button>
             </div>
        </div>
    </div>
    <div id="ticket-modal" class="modal-overlay hidden">
        <div class="modal-container">
           <button class="modal-close-x">&times;</button>>
            <h2 class="modal-title">Criar Chamado</h2>
            <form id="ticket-form">
                <div class="form-group">
                    <label class="form-label" for="occurrence-type">Ocorrência</label>
                    <select class="form-select" id="occurrence-type" required>
                        <option value="" selected disabled>Selecione...</option>
                        <option value="Hidraulica">Hidráulica</option>
                        <option value="Eletrica">Elétrica</option>
                        <option value="Elevador">Elevador</option>
                        <option value="Gerador">Gerador</option>
                        <option value="Pintura">Pintura</option>
                        <option value="Alvenaria">Alvenaria / Estrutura</option>
                        <option value="Jardinagem">Jardinagem / Paisagismo</option>
                        <option value="Limpeza">Limpeza Específica (Ex: Fachada, Piscina)</option>
                        <option value="Seguranca">Segurança (Câmeras, Portões, Interfone)</option>
                        <option value="ArCondicionado">Ar Condicionado Central</option>
                        <option value="Pragas">Controle de Pragas</option>
                        <option value="Telecom">Telecomunicações (Antena, Cabeamento)</option>
                        <option value="Incendio">Sistema de Incêndio (Extintores, Hidrantes)</option>
                        <option value="Gas">Sistema de Gás</option>
                        <option value="Outros">Geral / Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="ticket-level">Nível/Localização Principal</label>
                    <select class="form-select" id="ticket-level" required>
                        <option value="" selected disabled>Selecione o Nível...</option>
                        <option value="subsolo">Subsolo</option>
                        <option value="terreo">Térreo</option>
                        <option value="vazado">Vazado</option>
                        <option value="pavimento_tipo">Pavimento Tipo</option>
                        <option value="coberta">Coberta / Casa de Máquinas</option>
                        <option value="cobertura">Cobertura (Área Social/Lazer)</option>
                        <option value="garagem">Garagem (Geral)</option>
                        <option value="area_externa">Área Externa / Jardim</option>
                        <option value="outro_nivel">Outro Nível (Usar Área)</option> </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="ticket-area">Área Específica</label>
                    <select class="form-select" id="ticket-area" required>
                        <option value="" selected disabled>Selecione a Área...</option>
                        <option value="salao_festas">Salão de Festas</option>
                        <option value="copa">Copa (Salão/Apoio)</option>
                        <option value="espaco_gourmet">Espaço Gourmet</option>
                        <option value="hall_social">Hall Social / Entrada</option>
                        <option value="hall_servico">Hall de Serviço</option>
                        <option value="escada">Escadaria / Corredor</option>
                        <option value="academia">Academia</option>
                        <option value="brinquedoteca">Brinquedoteca / Playgroud</option>
                        <option value="piscina">Piscina / Deck</option>
                        <option value="quadra">Quadra Esportiva</option>
                        <option value="garagem_especifica">Garagem (Vaga/Local Específico)</option>
                        <option value="bicicletario">Bicicletário</option>
                        <option value="casa_maquinas">Casa de Máquinas (Bombas/Elevador)</option>
                        <option value="deposito">Depósito / Almoxarifado</option>
                        <option value="sala_sindico">Sala do Síndico / Administração</option>
                        <option value="portaria">Portaria / Guarita</option>
                        <option value="apartamento">Apartamento (Especificar nº no campo Outro)</option> <option value="outro">Outro (Especificar abaixo)</option>
                    </select>
                    <input type="text" class="form-control hidden" id="ticket-area-custom" placeholder="Especifique a área/localização exata" style="margin-top: 8px;">
                    </div>

                <div class="form-group"><label class="form-label" for="description">Descrição</label><input type="text" class="form-control" id="description" placeholder="Breve descrição" required></div>
                <div class="form-group"><label class="form-label" for="priority">Prioridade</label><select class="form-select" id="priority" required><option value="" selected disabled>Selecione...</option><option value="Baixo">Baixo</option><option value="Média">Média</option><option value="Alta">Alta</option><option value="Urgência">Urgência</option></select></div>
                <div class="form-actions">
                    <button class="modal-close-x">&times;</button>
                    <button type="submit" class="btn btn-primary">Próximo</button>
                </div>
            </form>
        </div>
    </div>
    <div id="preview-modal" class="modal-overlay hidden">
        <div class="modal-container">
            <button class="modal-close-x">&times;</button>
            <h2 class="modal-title">Pré-visualização do Chamado</h2>
            <div class="preview-container">
                <div class="preview-title">Detalhes</div>
                <div class="preview-item"><span class="preview-label">Ocorrência:</span><span class="preview-value" id="preview-occurrence"></span></div>
                <div class="preview-item"><span class="preview-label">Localização:</span><span class="preview-value" id="preview-location"></span></div>
                <div class="preview-item"><span class="preview-label">Descrição:</span><span class="preview-value" id="preview-description"></span></div>
                <div class="preview-item"><span class="preview-label">Prioridade:</span><span class="preview-value" id="preview-priority"></span></div>
            </div>
            <div class="whatsapp-section">
                <h3 class="preview-title">Enviar para Fornecedor</h3>
                <div id="supplier-info">
                    <p>Selecione o fornecedor para esta ocorrência:</p>
                    <select class="form-select" id="supplier-select"><option value="" selected disabled>Carregando...</option></select>
                    <div id="no-supplier" class="hidden">
                        <div class="status-message status-info">Nenhum fornecedor cadastrado para este tipo.</div>
                        <button type="button" class="btn btn-success" id="add-supplier-btn-from-preview"><i class="material-icons">add</i> Adicionar Novo Fornecedor</button>
                    </div>
                </div>
                <button class="whatsapp-btn" id="send-whatsapp-btn" disabled><i class="fab fa-whatsapp"></i> Enviar via WhatsApp</button>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="back-to-form-btn">Voltar</button>
                <button type="button" class="btn btn-primary" id="confirm-ticket-btn">Confirmar Chamado</button>
            </div>
        </div>
    </div>
     <div id="supplier-modal" class="modal-overlay hidden">
        <div class="modal-container">
            <button class="modal-close-x" id="close-supplier-modal-x">X</button>
            <h2 class="modal-title" id="supplier-modal-title">Adicionar Fornecedor</h2>
            <form id="supplier-form">
                <input type="hidden" id="supplier-id">
                <div class="form-group"><label class="form-label" for="supplier-name">Nome</label><input type="text" class="form-control" id="supplier-name" required></div>
                 <div class="form-group"><label class="form-label" for="supplier-phone">Telefone (Ex: +55 (11) 9...)</label><input type="tel" class="form-control" id="supplier-phone" placeholder="+55 (XX) XXXXX-XXXX" required maxlength="19"></div>
                <div class="form-group">
    <label class="form-label" for="supplier-occurrence">Serviço Principal</label>
    <select class="form-select" id="supplier-occurrence" required>
        <option value="" selected disabled>Selecione...</option>
        <option value="Hidraulica">Hidráulica</option>
        <option value="Eletrica">Elétrica</option>
        <option value="Elevador">Elevador</option>
        <option value="Gerador">Gerador</option>
        <option value="Pintura">Pintura</option>
        <option value="Alvenaria">Alvenaria / Estrutura</option>
        <option value="Jardinagem">Jardinagem / Paisagismo</option>
        <option value="Limpeza">Limpeza Específica</option>
        <option value="Seguranca">Segurança</option>
        <option value="ArCondicionado">Ar Condicionado Central</option>
        <option value="Pragas">Controle de Pragas</option>
        <option value="Telecom">Telecomunicações</option>
        <option value="Incendio">Sistema de Incêndio</option>
        <option value="Gas">Sistema de Gás</option>
        <option value="Outros">Geral / Outros</option>
    </select>
</div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-supplier-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>
     <div id="manage-suppliers-modal" class="modal-overlay hidden">
        <div class="modal-container">
            <button class="modal-close-x">&times;</button>
            <h2 class="modal-title">Fornecedores Cadastrados</h2>
            <div class="contacts-list" id="manage-contacts-list">
                <div class="status-message status-info">Carregando...</div>
            </div>
            <div class="form-actions" style="justify-content: space-between;">
                <button type="button" class="btn btn-secondary" id="close-manage-suppliers-btn">Fechar</button>
                <button type="button" class="btn btn-success" id="new-supplier-btn"><i class="material-icons" style="font-size: 18px; margin-right: 8px; vertical-align: middle;">add</i> Novo Fornecedor</button>
            </div>
        </div>
    </div>
    <script src="script/index.js"></script>
    <script src="script/dados.js"></script>
</body>
</html>